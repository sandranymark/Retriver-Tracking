<div class="container">



    <!-- <select class="fitt__select" (change)="selectDog($event)">
        <option *ngFor="let dog of dogs" [value]="dog._id" [selected]="dog._id === activeDog?._id">
            {{ dog.nickname }}
        </option>
    </select>
  -->





    <!-- Modal för att lägga till en ny hund -->
    <div *ngIf="showAddDogModal" class="modal">
        <div class="modal-content">
            <span class="close" (click)="closeAddDogModal()">&times;</span>
            <h2>Lägg till en ny hund</h2>

            <mat-form-field appearance="outline">
                <mat-label>Namn</mat-label>
                <input matInput [(ngModel)]="newDog.name">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Smeknamn</mat-label>
                <input matInput [(ngModel)]="newDog.nickname">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Ras</mat-label>
                <input matInput [(ngModel)]="newDog.breed">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Ålder</mat-label>
                <input matInput type="number" [(ngModel)]="newDog.age">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Kön</mat-label>
                <mat-select [(ngModel)]="newDog.sex">
                    <mat-option value="male">Hane</mat-option>
                    <mat-option value="female">Tik</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Bild-URL</mat-label>
                <input matInput [(ngModel)]="newDog.image">
            </mat-form-field>

            <div class="button-group">
                <button mat-raised-button color="primary" (click)="addDog()">
                    <mat-icon>check</mat-icon> Spara
                </button>
                <button mat-raised-button color="warn" (click)="closeAddDogModal()">
                    <mat-icon>close</mat-icon> Avbryt
                </button>
            </div>
        </div>
    </div>









    <div class="header" *ngIf="activeDog">
        <img [src]="activeDog.image" [alt]="activeDog.name" class="dog-profile-pic">
        <h1>{{ activeDog.nickname }}</h1>
    </div>


    <div class="select__btns">
        <!-- Knapp för att lägga till en ny hund -->
        <button class="btn__add" (click)="openAddDogModal()">
            <mat-icon>add</mat-icon>
        </button>

        <!-- Hundväljare-komponenten -->
        <form class="select__dog-form" [formGroup]="dogForm">
            <mat-form-field appearance="outline" class="no-outline">
                <mat-label>Välj hund</mat-label>
                <mat-select formControlName="selectedDog" (selectionChange)="selectDog($event.value)">
                    <mat-option *ngFor="let dog of dogs" [value]="dog._id">
                        {{ dog.nickname }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </form>



    </div>



    <!-- Profilkort -->
    <div class="profile-card" *ngIf="activeDog">
        <nav class="profile__card-icons">
            <span class="profile__card-icons-flex">
                <mat-icon matTooltip="Edit" matTooltipPosition="above" (click)="toggleEditMode()">
                    edit
                </mat-icon>
            </span>
        </nav>

        <ul>
            <li class="list-info" *ngFor="let field of profileFields">
                <div class="label-container">
                    <strong>{{ field.label }}:</strong>
                </div>
                <div class="input-container">
                    <span *ngIf="!editMode">{{ activeDog[field.key] }}</span>
                    <mat-form-field *ngIf="editMode" appearance="outline">
                        <input matInput [(ngModel)]="activeDog[field.key]">
                    </mat-form-field>
                </div>
            </li>

            <!-- Knappgrupp: Spara & Avbryt -->
            <div class="button-group" *ngIf="editMode">
                <button mat-raised-button color="primary" (click)="saveChanges()">
                    <mat-icon>check</mat-icon> Spara
                </button>
                <button mat-raised-button color="warn" (click)="cancelEdit()">
                    <mat-icon>close</mat-icon> Avbryt
                </button>
            </div>
        </ul>
    </div>

    <!-- Health Tracking -->
    <div class="health-tracking">
        <h2>Hur mår {{ activeDog?.nickname }} idag?</h2>
        <div class="progress">
            <p>Meals</p>
            <div class="progress-bar">
                <div class="progress-fill meals"></div>
            </div>
        </div>
        <div class="progress">
            <p>Routine Walk</p>
            <div class="progress-bar">
                <div class="progress-fill walk"></div>
            </div>
        </div>
        <div class="buttons">
            <button class="btn">Nutrition</button>
            <button class="btn">Medication</button>
        </div>
    </div>

    <!-- Weight Tracking -->
    <div class="weight-tracking">
        <h2>Spåra {{ activeDog?.nickname }}s vikt</h2>
        <p class="weight-value">28.09 kg</p>
        <button class="btn">+ Lägg till vikt</button>
    </div>
</div>